{% extends "base.html" %}
{% load thumbnail %}
{% load humanize %}


{% block content %}
    <h1>Election leaflets from {{ party_name }}</h1>
    {% if last_leaflet_days >= 45 %}
        <div class="panel">
            <p>
                We haven't seen any leaflets from {{ party_name }} for {{ last_leaflet_days }} days!
                Please help by tracking some down and photographing them.</p>
        </div>
    {% endif %}

    {% include "leaflets/includes/leaflet_filter.html" %}

    {% if page_obj %}
        <p>{{ paginator.count|intcomma }} leaflets</p>

        {% with page_obj as leaflet_list %}
            {% include "leaflets/includes/leaflet_list.html" %}
        {% endwith %}

        {% if is_paginated %}
            <p class="page-current">
                Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
            </p>
            <nav class="pagination" role="menu" aria-label="Pagination">
                <ul>
                    {% if page_obj.has_previous %}
                        <li><a href="{% url "leaflets" %}?page={{ page_obj.previous_page_number }}">&laquo; Previous
                            page</a></li>
                    {% endif %}
                    {% if page_obj.has_next %}
                        <li><a href="{% url "leaflets" %}?page={{ page_obj.next_page_number }}">Next page &raquo;</a>
                        </li>
                    {% endif %}
                </ul>
            </nav>
        {% endif %}
    {% else %}
        <p>No leaflets found</p>
        {% if filter.data %}
            <p><a href="{{ request.path }}" class="ds-cta">Reset filters</a></p>
        {% endif %}
    {% endif %}
{% endblock %}
